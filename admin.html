<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–∞–Ω–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ | –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/variables.css">

    <style>
        :root {
            --admin-bg: #f4f6fb;
            --admin-card: #ffffff;
            --admin-border: #e8ecf3;
            --admin-muted: #6b7280;
            --admin-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
        }

        body {
            font-family: var(--font-main);
            background: var(--admin-bg);
            padding: 24px;
            color: var(--color-primary);
        }

        .admin-container { max-width: 1200px; margin: 0 auto; }

        .admin-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 24px; background: var(--admin-card); padding: 18px 22px;
            border-radius: 14px; box-shadow: var(--admin-shadow);
        }
        .admin-title { font-size: 1.4rem; font-weight: 700; color: var(--color-primary); }
        .admin-subtitle { color: var(--admin-muted); font-size: 0.9rem; }
        .admin-actions { display: flex; gap: 10px; align-items: center; }

        .admin-grid { display: grid; grid-template-columns: 340px 1fr; gap: 24px; align-items: start; }
        @media (max-width: 1024px) { .admin-grid { grid-template-columns: 1fr; } }

        .card {
            background: var(--admin-card);
            border: 1px solid var(--admin-border);
            border-radius: 14px;
            box-shadow: var(--admin-shadow);
            padding: 22px;
        }
        .card.sticky { position: sticky; top: 18px; }

        .section-title { font-size: 1rem; font-weight: 700; margin-bottom: 10px; }
        .muted { color: var(--admin-muted); font-size: 0.85rem; }
        .divider { border: none; border-top: 1px solid var(--admin-border); margin: 18px 0; }

        .form-group { margin-bottom: 14px; }
        .form-group label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.85rem; color: #111827; }
        .form-control {
            width: 100%; padding: 10px 12px; border: 1px solid var(--admin-border);
            border-radius: 10px; font-family: inherit; background: #fff;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .form-control:focus { outline: none; border-color: #93c5fd; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15); }

        .btn-primary, .btn-secondary, .btn-ghost {
            border: none; border-radius: 10px; cursor: pointer;
            font-weight: 600; padding: 10px 16px;
        }
        .btn-primary { background: var(--color-accent); color: white; width: 100%; }
        .btn-secondary { background: var(--color-primary); color: white; text-decoration: none; }
        .btn-ghost { background: #eef2ff; color: #334155; }
        .btn-danger { background: #e74c3c; color: white; margin-top: 10px; width: 100%; }

        .table-card { background: var(--admin-card); padding: 0; border: 1px solid var(--admin-border); border-radius: 14px; box-shadow: var(--admin-shadow); overflow: hidden; }
        .table-header { padding: 16px 20px; border-bottom: 1px solid var(--admin-border); display: flex; justify-content: space-between; align-items: center; }
        .table-controls { display: flex; gap: 10px; align-items: center; }
        .table-controls .form-control { max-width: 220px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { text-align: left; padding: 14px 16px; border-bottom: 1px solid var(--admin-border); }
        th { background: #f8fafc; font-weight: 600; color: #0f172a; font-size: 0.85rem; }
        tr:hover td { background: #fafbff; }
        .img-preview { width: 52px; height: 52px; object-fit: cover; border-radius: 8px; }
        .pill { background: #eef2ff; color: #3730a3; padding: 2px 10px; border-radius: 999px; font-size: 0.75rem; }
        .price-cell { font-weight: 600; color: #0f172a; }
        .action-btn { cursor: pointer; border: none; background: none; padding: 6px; font-size: 1.1rem; transition: 0.2s; }
        .btn-edit { color: #2563eb; }
        .btn-delete { color: #dc2626; }

        .import-grid { display: grid; gap: 10px; }
        .status-line { margin-top: 8px; font-size: 0.85rem; color: var(--admin-muted); }
        .status-line.success { color: #15803d; }
        .status-line.error { color: #b91c1c; }

        .admin-auth {
            position: fixed; inset: 0; background: rgba(15, 23, 42, 0.35);
            display: flex; align-items: center; justify-content: center; z-index: 999;
            backdrop-filter: blur(6px);
        }
        .admin-auth-card {
            width: 360px; background: var(--admin-card); border-radius: 14px;
            padding: 24px; box-shadow: var(--admin-shadow); border: 1px solid var(--admin-border);
        }
        .admin-auth-card h3 { margin-bottom: 8px; }
    </style>
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <div>
                <div class="admin-title">üì¶ –í–∞–Ω–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ ‚Äî –ú–µ–Ω–µ–¥–∂–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤</div>
                <div class="admin-subtitle">–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è</div>
            </div>
            <div class="admin-actions">
                <a href="index.html" class="btn-secondary">–ù–∞ —Å–∞–π—Ç</a>
            </div>
        </div>

        <div class="admin-grid">
        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <aside>
            <div class="card sticky">
                <h3 class="section-title" id="formTitle">–ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h3>
                <form id="productForm">
                    <input type="hidden" id="prodId">

                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        <input type="text" id="prodName" class="form-control" required placeholder="–ù–∞–ø—Ä: –ú—ã–ª—å–Ω–∏—Ü–∞">
                    </div>

                    <div class="form-group">
                        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <input type="text" id="prodCategory" class="form-control" list="catList" required>
                        <datalist id="catList"></datalist>
                    </div>

                    <div class="form-group">
                        <label>–¶–µ–Ω–∞ (‚ÇΩ)</label>
                        <input type="number" id="prodPrice" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label>–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ (‚ÇΩ)</label>
                        <input type="number" id="prodOldPrice" class="form-control" placeholder="–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ">
                    </div>

                    <div class="form-group">
                        <label>–ë–µ–π–¥–∂ (–•–∏—Ç/–ù–æ–≤–∏–Ω–∫–∞/–°–∫–∏–¥–∫–∞)</label>
                        <input type="text" id="prodBadge" class="form-control" placeholder="–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ">
                    </div>

                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="prodDesc" class="form-control" rows="3" placeholder="–ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                    </div>

                    <div class="form-group">
                        <label>–†–µ–π—Ç–∏–Ω–≥ (0-5)</label>
                        <input type="number" step="0.1" id="prodRating" class="form-control" placeholder="–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ">
                    </div>

                    <div class="form-group">
                        <label>–û—Ç–∑—ã–≤—ã (–∫–æ–ª-–≤–æ)</label>
                        <input type="number" id="prodReviews" class="form-control" placeholder="–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ">
                    </div>

                    <div class="form-group">
                        <label>–û—Å—Ç–∞—Ç–æ–∫</label>
                        <input type="number" id="prodStock" class="form-control" placeholder="–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ">
                    </div>

                    <div class="form-group">
                        <label>URL –ö–∞—Ä—Ç–∏–Ω–∫–∏</label>
                        <input type="url" id="prodImg" class="form-control" required placeholder="https://...">
                    </div>

                    <button type="submit" class="btn-primary" id="submitBtn">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
                    <button type="button" class="btn-danger" id="cancelBtn" style="display: none;">–û—Ç–º–µ–Ω–∞</button>
                </form>

                <hr class="divider">

                <h4 class="section-title">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h4>
                <p class="muted">–≠–∫—Å–ø–æ—Ä—Ç —Ç–µ–∫—É—â–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ (JSON).</p>
                <textarea id="jsonOutput" class="form-control" rows="5" readonly></textarea>

                <hr class="divider">

                <h4 class="section-title">–ò–º–ø–æ—Ä—Ç JSON (Bulk)</h4>
                <p class="muted">–í—Å—Ç–∞–≤—å –º–∞—Å—Å–∏–≤ JSON –∏ –Ω–∞–∂–º–∏ ¬´–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å¬ª.</p>
                <textarea id="jsonImport" class="form-control" rows="6" placeholder='[{"name":"...","category":"...","price":1000,"img":"..."}]'></textarea>
                <button type="button" class="btn-primary" id="importBtn" style="margin-top:10px;">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>

                <hr class="divider">

                <h4 class="section-title">–ò–º–ø–æ—Ä—Ç CSV</h4>
                <div class="import-grid">
                    <input type="file" id="csvFile" class="form-control" accept=".csv">
                    <select id="csvDelimiter" class="form-control">
                        <option value=";">–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: ;</option>
                        <option value=",">–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: ,</option>
                        <option value="	">–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: —Ç–∞–±</option>
                    </select>
                    <select id="csvEncoding" class="form-control">
                        <option value="utf-8">–ö–æ–¥–∏—Ä–æ–≤–∫–∞: UTF-8</option>
                        <option value="windows-1251">–ö–æ–¥–∏—Ä–æ–≤–∫–∞: Windows-1251</option>
                    </select>
                    <div class="muted">–ö–æ–ª–æ–Ω–∫–∏: name, category, price, img, oldPrice, badge, desc, rating, reviews, stock</div>
                    <button type="button" class="btn-ghost" id="previewCsvBtn">–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–≤—å—é</button>
                    <textarea id="csvPreview" class="form-control" rows="5" readonly placeholder="–ü—Ä–µ–≤—å—é –ø–µ—Ä–≤—ã—Ö —Å—Ç—Ä–æ–∫..."></textarea>
                    <button type="button" class="btn-ghost" id="downloadCsvTemplate">–°–∫–∞—á–∞—Ç—å CSV —à–∞–±–ª–æ–Ω</button>
                    <button type="button" class="btn-primary" id="importCsvBtn">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å CSV</button>
                    <div id="importStatus" class="status-line"></div>
                    <div id="importErrors" class="status-line error"></div>
                </div>
            </div>
        </aside>

        <!-- –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
        <main class="table-card">
            <div class="table-header">
                <div class="section-title">–ö–∞—Ç–∞–ª–æ–≥</div>
                <div class="table-controls">
                    <input type="text" id="adminSearch" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é">
                    <select id="adminCategoryFilter" class="form-control">
                        <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                    </select>
                    <div class="muted">–í—Å–µ–≥–æ: <span id="productsCount">0</span></div>
                </div>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>–§–æ—Ç–æ</th>
                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                        <th>–¶–µ–Ω–∞</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody id="adminTableBody">
                    <!-- JS render -->
                </tbody>
            </table>
        </main>
        </div>
    </div>

    <script type="module" src="assets/js/admin.js"></script>

    <div class="admin-auth" id="adminAuthOverlay">
        <div class="admin-auth-card">
            <h3>–í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É</h3>
            <p class="muted">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</p>
            <form id="adminAuthForm">
                <input type="text" id="adminLogin" class="form-control" placeholder="–õ–æ–≥–∏–Ω">
                <input type="password" id="adminPassword" class="form-control" placeholder="–ü–∞—Ä–æ–ª—å">
                <div id="adminAuthError" class="status-line error"></div>
                <button type="submit" class="btn-primary" style="margin-top: 10px;">–í–æ–π—Ç–∏</button>
            </form>
        </div>
    </div>
</body>
</html>